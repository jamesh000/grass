#version 460 core
out vec4 FragColor;

in vec2 TexCoord;
in vec4 FragCoord;

// texture samplers
uniform sampler2D grasstex;

void main()
{
        // discard if alpha
        vec4 col = texture(grasstex, TexCoord);
        if (col.a < 0.1) discard;

        // fog
        float fog_maxdist = 30.0;
        float fog_mindist = 5.0;
        vec4 fog_color = vec4(0.53, 0.80, 0.92, 1.0);

        float dist = length(FragCoord.xyz);
        float fog_factor = (fog_maxdist - dist) /  (fog_maxdist - fog_mindist);
        fog_factor = clamp(fog_factor, 0.0, 1.0);

	FragColor = mix(fog_color, col, fog_factor);
}
